<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CentOS Docker 安装 | ratfrog的博客</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/icon.png">
    <script>var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?46eb6dbf0c639c7f8f8b9bc2e1b8e9ad";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();</script>
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.b65e14f4.css" as="style"><link rel="preload" href="/assets/js/app.3946be5a.js" as="script"><link rel="preload" href="/assets/js/2.3d03ea60.js" as="script"><link rel="preload" href="/assets/js/17.bfd620f0.js" as="script"><link rel="prefetch" href="/assets/js/10.e470672d.js"><link rel="prefetch" href="/assets/js/11.bfa65d41.js"><link rel="prefetch" href="/assets/js/12.ca95d497.js"><link rel="prefetch" href="/assets/js/13.4d1917e2.js"><link rel="prefetch" href="/assets/js/14.96f8d276.js"><link rel="prefetch" href="/assets/js/15.fdd1642f.js"><link rel="prefetch" href="/assets/js/16.fa0d9296.js"><link rel="prefetch" href="/assets/js/18.56e372fb.js"><link rel="prefetch" href="/assets/js/19.d685be0c.js"><link rel="prefetch" href="/assets/js/20.49d74326.js"><link rel="prefetch" href="/assets/js/21.75e93226.js"><link rel="prefetch" href="/assets/js/22.042dc01e.js"><link rel="prefetch" href="/assets/js/23.97d74b4e.js"><link rel="prefetch" href="/assets/js/24.d1a6a957.js"><link rel="prefetch" href="/assets/js/25.2bd2c818.js"><link rel="prefetch" href="/assets/js/26.4adcccf8.js"><link rel="prefetch" href="/assets/js/27.36673bf5.js"><link rel="prefetch" href="/assets/js/28.377cbb38.js"><link rel="prefetch" href="/assets/js/29.a3c4e2cf.js"><link rel="prefetch" href="/assets/js/3.2d45cad8.js"><link rel="prefetch" href="/assets/js/30.67ffd91a.js"><link rel="prefetch" href="/assets/js/31.8f68aa52.js"><link rel="prefetch" href="/assets/js/32.0c941090.js"><link rel="prefetch" href="/assets/js/33.4bd98d0d.js"><link rel="prefetch" href="/assets/js/34.7536f5af.js"><link rel="prefetch" href="/assets/js/35.254bc746.js"><link rel="prefetch" href="/assets/js/36.20c48594.js"><link rel="prefetch" href="/assets/js/37.1a061bb8.js"><link rel="prefetch" href="/assets/js/38.dda2041c.js"><link rel="prefetch" href="/assets/js/39.19189f02.js"><link rel="prefetch" href="/assets/js/4.5761d71f.js"><link rel="prefetch" href="/assets/js/40.fd65a986.js"><link rel="prefetch" href="/assets/js/41.c04f6407.js"><link rel="prefetch" href="/assets/js/42.b9fc7a71.js"><link rel="prefetch" href="/assets/js/43.2fee6863.js"><link rel="prefetch" href="/assets/js/44.9941aa3d.js"><link rel="prefetch" href="/assets/js/45.51fe3993.js"><link rel="prefetch" href="/assets/js/46.b6c383f1.js"><link rel="prefetch" href="/assets/js/5.2f3fb24e.js"><link rel="prefetch" href="/assets/js/6.f5ba9d68.js"><link rel="prefetch" href="/assets/js/7.d69aea7b.js"><link rel="prefetch" href="/assets/js/8.bee30495.js"><link rel="prefetch" href="/assets/js/9.f079a9b0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b65e14f4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ratfrog的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/all/qianqian/" class="nav-link router-link-active">
  钱钱
</a></li><li class="dropdown-item"><!----> <a href="/all/xiexie/" class="nav-link">
  写写
</a></li><li class="dropdown-item"><!----> <a href="/all/xingxing/" class="nav-link">
  星星
</a></li><li class="dropdown-item"><!----> <a href="/all/paipai/" class="nav-link">
  拍拍
</a></li><li class="dropdown-item"><!----> <a href="/all/fanfan/" class="nav-link">
  翻翻
</a></li><li class="dropdown-item"><!----> <a href="/all/huahua/" class="nav-link">
  画画
</a></li><li class="dropdown-item"><!----> <a href="/all/qiqi/" class="nav-link">
  其其
</a></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/app/" class="nav-link">
  应用
</a></div><div class="nav-item"><a href="/radio/" class="nav-link">
  电台
</a></div><div class="nav-item"><a href="/video/" class="nav-link">
  视频
</a></div><div class="nav-item"><a href="/all/" class="nav-link router-link-active">
  最新文章
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  支持打赏
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/photowall/" class="nav-link">
  照片墙
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link">
  时间轴
</a></div><div class="nav-item"><a href="/bbs/" class="nav-link">
  公告板
</a></div><div class="nav-item"><a href="/message/" class="nav-link">
  留言板
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/all/qianqian/" class="nav-link router-link-active">
  钱钱
</a></li><li class="dropdown-item"><!----> <a href="/all/xiexie/" class="nav-link">
  写写
</a></li><li class="dropdown-item"><!----> <a href="/all/xingxing/" class="nav-link">
  星星
</a></li><li class="dropdown-item"><!----> <a href="/all/paipai/" class="nav-link">
  拍拍
</a></li><li class="dropdown-item"><!----> <a href="/all/fanfan/" class="nav-link">
  翻翻
</a></li><li class="dropdown-item"><!----> <a href="/all/huahua/" class="nav-link">
  画画
</a></li><li class="dropdown-item"><!----> <a href="/all/qiqi/" class="nav-link">
  其其
</a></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/app/" class="nav-link">
  应用
</a></div><div class="nav-item"><a href="/radio/" class="nav-link">
  电台
</a></div><div class="nav-item"><a href="/video/" class="nav-link">
  视频
</a></div><div class="nav-item"><a href="/all/" class="nav-link router-link-active">
  最新文章
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  支持打赏
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/photowall/" class="nav-link">
  照片墙
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link">
  时间轴
</a></div><div class="nav-item"><a href="/bbs/" class="nav-link">
  公告板
</a></div><div class="nav-item"><a href="/message/" class="nav-link">
  留言板
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="centos-docker-安装"><a href="#centos-docker-安装" class="header-anchor">#</a> CentOS Docker 安装</h1> <p>Docker 支持以下的 64 位 CentOS 版本：
CentOS 7
CentOS 8
更高版本...</p> <h2 id="使用官方安装脚本自动安装"><a href="#使用官方安装脚本自动安装" class="header-anchor">#</a> 使用官方安装脚本自动安装</h2> <p>安装命令如下：
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
也可以使用国内 daocloud 一键安装命令：
curl -sSL https://get.daocloud.io/docker | sh</p> <h2 id="手动安装"><a href="#手动安装" class="header-anchor">#</a> 手动安装</h2> <p>卸载旧版本
较旧的 Docker 版本称为 docker 或 docker-engine 。如果已安装这些程序，请卸载它们以及相关的依赖项。
$ sudo yum remove docker <br>
docker-client <br>
docker-client-latest <br>
docker-common <br>
docker-latest <br>
docker-latest-logrotate <br>
docker-logrotate <br>
docker-engine
安装 Docker Engine-Community
使用 Docker 仓库进行安装
在新主机上首次安装 Docker Engine-Community 之前，需要设置 Docker 仓库。之后，您可以从仓库安装和更新 Docker。
设置仓库
安装所需的软件包。yum-utils 提供了 yum-config-manager ，并且 device mapper 存储驱动程序需要 device-mapper-persistent-data 和 lvm2。
$ sudo yum install -y yum-utils <br>
device-mapper-persistent-data <br>
lvm2
使用以下命令来设置稳定的仓库。
使用官方源地址（比较慢）
$ sudo yum-config-manager <br>
--add-repo <br>
https://download.docker.com/linux/centos/docker-ce.repo
可以选择国内的一些源地址：
阿里云
$ sudo yum-config-manager <br>
--add-repo <br>
http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
清华大学源
$ sudo yum-config-manager <br>
--add-repo <br>
https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo
安装 Docker Engine-Community
安装最新版本的 Docker Engine-Community 和 containerd，或者转到下一步安装特定版本：</p> <p>$ sudo yum install docker-ce docker-ce-cli containerd.io
如果提示您接受 GPG 密钥，请选是。
有多个 Docker 仓库吗？
如果启用了多个 Docker 仓库，则在未在 yum install 或 yum update 命令中指定版本的情况下，进行的安装或更新将始终安装最高版本，这可能不适合您的稳定性需求。
Docker 安装完默认未启动。并且已经创建好 docker 用户组，但该用户组下没有用户。
要安装特定版本的 Docker Engine-Community，请在存储库中列出可用版本，然后选择并安装：
1、列出并排序您存储库中可用的版本。此示例按版本号（从高到低）对结果进行排序。
$ yum list docker-ce --showduplicates | sort -r
docker-ce.x86_64  3:18.09.1-3.el7                     docker-ce-stable
docker-ce.x86_64  3:18.09.0-3.el7                     docker-ce-stable
docker-ce.x86_64  18.06.1.ce-3.el7                    docker-ce-stable
docker-ce.x86_64  18.06.0.ce-3.el7                    docker-ce-stable
2、通过其完整的软件包名称安装特定版本，该软件包名称是软件包名称（docker-ce）加上版本字符串（第二列），从第一个冒号（:）一直到第一个连字符，并用连字符（-）分隔。例如：docker-ce-18.09.1。
$ sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io
启动 Docker。
$ sudo systemctl start docker
通过运行 hello-world 映像来验证是否正确安装了 Docker Engine-Community 。
$ sudo docker run hello-world</p> <h1 id="docker-hello-world"><a href="#docker-hello-world" class="header-anchor">#</a> Docker Hello World</h1> <p>Docker 允许你在容器内运行应用程序， 使用 docker run 命令来在容器内运行一个应用程序。
输出Hello world
runoob@runoob:~$ docker run ubuntu:15.10 /bin/echo &quot;Hello world&quot;
Hello world
各个参数解析：
docker: Docker 的二进制执行文件。
run: 与前面的 docker 组合来运行一个容器。
ubuntu:15.10 指定要运行的镜像，Docker 首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。
/bin/echo &quot;Hello world&quot;: 在启动的容器里执行的命令
以上命令完整的意思可以解释为：Docker 以 ubuntu15.10 镜像创建一个新容器，然后在容器里执行 bin/echo &quot;Hello world&quot;，然后输出结果。</p> <h2 id="运行交互式的容器"><a href="#运行交互式的容器" class="header-anchor">#</a> 运行交互式的容器</h2> <p>我们通过 docker 的两个参数 -i -t，让 docker 运行的容器实现&quot;对话&quot;的能力：
runoob@runoob:~$ docker run -i -t ubuntu:15.10 /bin/bash
root@0123ce188bd8:/#
各个参数解析：
-t: 在新容器内指定一个伪终端或终端。
-i: 允许你对容器内的标准输入 (STDIN) 进行交互。
注意第二行 root@0123ce188bd8:/#，此时我们已进入一个 ubuntu15.10 系统的容器
我们尝试在容器中运行命令 cat /proc/version和ls分别查看当前系统的版本信息和当前目录下的文件列表
root@0123ce188bd8:/#  cat /proc/version
Linux version 4.4.0-151-generic (buildd@lgw01-amd64-043) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.10) ) #178-Ubuntu SMP Tue Jun 11 08:30:22 UTC 2019
root@0123ce188bd8:/# ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@0123ce188bd8:/#
我们可以通过运行 exit 命令或者使用 CTRL+D 来退出容器。
root@0123ce188bd8:/#  exit
exit
root@runoob:~#
注意第三行中 root@runoob:~# 表明我们已经退出了当期的容器，返回到当前的主机中。</p> <h2 id="启动容器-后台模式"><a href="#启动容器-后台模式" class="header-anchor">#</a> 启动容器（后台模式）</h2> <p>使用以下命令创建一个以进程方式运行的容器
runoob@runoob:~$ docker run -d ubuntu:15.10 /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;
2b1b7a428627c51ab8810d541d759f072b4fc75487eed05812646b8534a2fe63
在输出中，我们没有看到期望的 &quot;hello world&quot;，而是一串长字符
2b1b7a428627c51ab8810d541d759f072b4fc75487eed05812646b8534a2fe63
这个长字符串叫做容器 ID，对每个容器来说都是唯一的，我们可以通过容器 ID 来查看对应的容器发生了什么。
首先，我们需要确认容器有在运行，可以通过 docker ps 来查看：
runoob@runoob:~$ docker ps
CONTAINER ID        IMAGE                  COMMAND              ...<br>
5917eac21c36        ubuntu:15.10           &quot;/bin/sh -c 'while t…&quot;    ...
输出详情介绍：
CONTAINER ID: 容器 ID。
IMAGE: 使用的镜像。
COMMAND: 启动容器时运行的命令。
CREATED: 容器的创建时间。
STATUS: 容器状态。
状态有7种：
created（已创建）
restarting（重启中）
running（运行中）
removing（迁移中）
paused（暂停）
exited（停止）
dead（死亡）
PORTS: 容器的端口信息和使用的连接类型（tcp\udp）。
NAMES: 自动分配的容器名称。
在宿主主机内使用 docker logs 命令，查看容器内的标准输出：
runoob@runoob:~$ docker logs 2b1b7a428627
runoob@runoob:~$ docker logs amazing_cori</p> <h2 id="停止容器"><a href="#停止容器" class="header-anchor">#</a> 停止容器</h2> <p>我们使用 docker stop 命令来停止容器:
通过 docker ps 查看，容器已经停止工作:
runoob@runoob:~$ docker ps
可以看到容器已经不在了。
也可以用下面的命令来停止:
runoob@runoob:~$ docker stop amazing_cori</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2/6/2021, 9:44:25 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.3946be5a.js" defer></script><script src="/assets/js/2.3d03ea60.js" defer></script><script src="/assets/js/17.bfd620f0.js" defer></script>
  </body>
</html>
